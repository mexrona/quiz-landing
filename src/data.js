// Ð”Ð°Ð½Ð½Ñ‹Ðµ Ð´Ð»Ñ ÐºÐ²Ð¸Ð·Ð°
// ÐšÐ°Ð¶Ð´Ñ‹Ð¹ Ð²Ð¾Ð¿Ñ€Ð¾Ñ Ð¸Ð¼ÐµÐµÑ‚: Ð²Ð¾Ð¿Ñ€Ð¾Ñ, Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ñ‹ Ð¾Ñ‚Ð²ÐµÑ‚Ð¾Ð², Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚ Ð¸ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ Ð´Ð»Ñ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð°
export const quizData = [
  {
    id: 1,
    question: "ÐšÐ°ÐºÐ¾Ð¹ ÑÐ·Ñ‹Ðº Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð´Ð»Ñ web-Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ Ð½Ð° Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´Ðµ?",
    options: ["Python", "JavaScript", "SQL", "Go"],
    correctAnswer: 1, // Ð¸Ð½Ð´ÐµÐºÑ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð¾Ñ‚Ð²ÐµÑ‚Ð°
    category: "frontend" // ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ Ð´Ð»Ñ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð°
  },
  {
    id: 2,
    question: "Ð§Ñ‚Ð¾ Ñ‚Ð°ÐºÐ¾Ðµ React?",
    options: [
      "Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° Ð´Ð»Ñ Ð¿Ð¾ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ñ… Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹ÑÐ¾Ð²",
      "Base Ð´Ð°Ð½Ð½Ñ‹Ñ…",
      "Ð¡ÐµÑ€Ð²ÐµÑ€",
      "ÐžÐ¿ÐµÑ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ð°Ñ ÑÐ¸ÑÑ‚ÐµÐ¼Ð°"
    ],
    correctAnswer: 0,
    category: "frontend"
  },
  {
    id: 3,
    question: "ÐšÐ°ÐºÐ¾Ð¹ Ð¸Ð· ÑÑ‚Ð¸Ñ… Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð² Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð´Ð»Ñ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð¿Ð°ÐºÐµÑ‚Ð°Ð¼Ð¸ JavaScript?",
    options: ["Git", "npm", "Docker", "Webpack"],
    correctAnswer: 1,
    category: "tools"
  },
  {
    id: 4,
    question: "Ð§Ñ‚Ð¾ Ð¾Ð·Ð½Ð°Ñ‡Ð°ÐµÑ‚ HTML?",
    options: [
      "HyperText Markup Language",
      "High Tech Modern Language",
      "Home Tool Markup Language",
      "Hyper Transfer Markup Logic"
    ],
    correctAnswer: 0,
    category: "frontend"
  }
];

// Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð´Ð»Ñ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸ Ð½Ð° Ð¾ÑÐ½Ð¾Ð²Ðµ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð°
export const getRecommendation = (score, totalQuestions) => {
  const percentage = (score / totalQuestions) * 100;

  if (percentage === 100) {
    return {
      title: "ÐžÑ‚Ð»Ð¸Ñ‡Ð½Ð¾! ðŸŽ‰",
      message: "Ð’Ñ‹ Ð¾Ñ‚Ð²ÐµÑ‚Ð¸Ð»Ð¸ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾ Ð½Ð° Ð²ÑÐµ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹! Ð’Ñ‹ Ð¾Ñ‚Ð»Ð¸Ñ‡Ð½Ð¾ Ñ€Ð°Ð·Ð±Ð¸Ñ€Ð°ÐµÑ‚ÐµÑÑŒ Ð² Ð¾ÑÐ½Ð¾Ð²Ð°Ñ… Ð²ÐµÐ±-Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸.",
      color: "success"
    };
  } else if (percentage >= 75) {
    return {
      title: "Ð¥Ð¾Ñ€Ð¾ÑˆÐ¾! ðŸ‘",
      message: "Ð’Ñ‹ Ð¿Ð¾ÐºÐ°Ð·Ð°Ð»Ð¸ Ñ…Ð¾Ñ€Ð¾ÑˆÐ¸Ð¹ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚. ÐŸÑ€Ð¾Ð¹Ð´Ð¸Ñ‚Ðµ ÐºÐ²Ð¸Ð· ÐµÑ‰Ðµ Ñ€Ð°Ð·, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð·Ð°ÐºÑ€ÐµÐ¿Ð¸Ñ‚ÑŒ Ð·Ð½Ð°Ð½Ð¸Ñ.",
      color: "good"
    };
  } else if (percentage >= 50) {
    return {
      title: "ÐÐµÐ¿Ð»Ð¾Ñ…Ð¾ ðŸ“š",
      message: "Ð’Ñ‹ Ð¾Ñ‚Ð²ÐµÑ‚Ð¸Ð»Ð¸ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾ Ð½Ð° Ð¿Ð¾Ð»Ð¾Ð²Ð¸Ð½Ñƒ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ¾Ð². Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÐ¼ Ð¸Ð·ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð» Ð¿Ð¾Ð´Ñ€Ð¾Ð±Ð½ÐµÐµ.",
      color: "medium"
    };
  } else {
    return {
      title: "Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÐ¼ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð¸Ñ‚ÑŒ ðŸ¤”",
      message: "ÐœÐµÐ½ÑŒÑˆÐµ Ð¿Ð¾Ð»Ð¾Ð²Ð¸Ð½Ñ‹ Ð¾Ñ‚Ð²ÐµÑ‚Ð¾Ð² Ð²ÐµÑ€Ð½Ð¾. ÐÐ°Ñ‡Ð½Ð¸Ñ‚Ðµ Ñ Ð¾ÑÐ½Ð¾Ð² Ð¸ Ð¿Ñ€Ð¾Ð¹Ð´Ð¸Ñ‚Ðµ ÐºÐ²Ð¸Ð· ÐµÑ‰Ðµ Ñ€Ð°Ð·.",
      color: "low"
    };
  }
};

// ===== Ð¤Ð£ÐÐšÐ¦Ð˜Ð˜ Ð”Ð›Ð¯ ÐŸÐ•Ð Ð•ÐœÐ•Ð¨Ð˜Ð’ÐÐÐ˜Ð¯ =====

// Ð‘Ð°Ð·Ð¾Ð²Ð°Ñ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ Ð´Ð»Ñ Ð¿ÐµÑ€ÐµÐ¼ÐµÑˆÐ¸Ð²Ð°Ð½Ð¸Ñ Ð¼Ð°ÑÑÐ¸Ð²Ð° (Ð°Ð»Ð³Ð¾Ñ€Ð¸Ñ‚Ð¼ Fisher-Yates)
// Ð‘ÐµÑ€ÐµÑ‚ ÐºÐ¾Ð¿Ð¸ÑŽ Ð¼Ð°ÑÑÐ¸Ð²Ð° Ð¸ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ ÐµÑ‘ Ð² ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½Ð¾Ð¼ Ð¿Ð¾Ñ€ÑÐ´ÐºÐµ
const shuffleArray = (array) => {
  // Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ ÐºÐ¾Ð¿Ð¸ÑŽ Ð¼Ð°ÑÑÐ¸Ð²Ð°, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð½Ðµ Ð¸Ð·Ð¼ÐµÐ½ÑÑ‚ÑŒ Ð¾Ñ€Ð¸Ð³Ð¸Ð½Ð°Ð»
  const shuffled = [...array];

  // ÐÐ»Ð³Ð¾Ñ€Ð¸Ñ‚Ð¼ Fisher-Yates: Ð¸Ð´ÐµÐ¼ Ñ ÐºÐ¾Ð½Ñ†Ð° Ð¼Ð°ÑÑÐ¸Ð²Ð° Ð¸ Ð¼ÐµÐ½ÑÐµÐ¼ ÐºÐ°Ð¶Ð´Ñ‹Ð¹ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚
  // Ð½Ð° ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½Ñ‹Ð¹ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ Ð¸Ð· Ð¾ÑÑ‚Ð°Ð²ÑˆÐ¸Ñ…ÑÑ
  for (let i = shuffled.length - 1; i > 0; i--) {
    // Ð“ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÐ¼ ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½Ñ‹Ð¹ Ð¸Ð½Ð´ÐµÐºÑ Ð¾Ñ‚ 0 Ð´Ð¾ i
    const randomIndex = Math.floor(Math.random() * (i + 1));

    // ÐœÐµÐ½ÑÐµÐ¼ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ð¼ÐµÑÑ‚Ð°Ð¼Ð¸
    [shuffled[i], shuffled[randomIndex]] = [shuffled[randomIndex], shuffled[i]];
  }

  return shuffled;
};

// ÐŸÐµÑ€ÐµÐ¼ÐµÑˆÐ¸Ð²Ð°ÐµÑ‚ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ñ‹ Ð¾Ñ‚Ð²ÐµÑ‚Ð¾Ð² Ð² Ð¾Ð´Ð½Ð¾Ð¼ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐµ
// ÐžÑ‡ÐµÐ½ÑŒ Ð²Ð°Ð¶Ð½Ð¾: Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÐµÑ‚ Ð¸Ð½Ð´ÐµÐºÑ correctAnswer Ð¿Ð¾ÑÐ»Ðµ Ð¿ÐµÑ€ÐµÐ¼ÐµÑˆÐ¸Ð²Ð°Ð½Ð¸Ñ!
const shuffleQuestionOptions = (question) => {
  // Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð½Ð¾Ð²Ñ‹Ð¹ Ð¾Ð±ÑŠÐµÐºÑ‚ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ° (Ð½Ðµ Ð¸Ð·Ð¼ÐµÐ½ÑÐµÐ¼ Ð¾Ñ€Ð¸Ð³Ð¸Ð½Ð°Ð»)
  const newQuestion = { ...question };

  // Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð¼Ð°ÑÑÐ¸Ð² Ð¿Ð°Ñ€ [Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚, Ð¾Ñ€Ð¸Ð³Ð¸Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¸Ð½Ð´ÐµÐºÑ]
  // Ð­Ñ‚Ð¾ Ð½ÑƒÐ¶Ð½Ð¾, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¾Ñ‚ÑÐ»ÐµÐ´Ð¸Ñ‚ÑŒ, ÐºÐ°ÐºÐ¾Ð¹ Ð±Ñ‹Ð» Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚
  const optionsWithIndices = question.options.map((option, index) => ({
    option,
    originalIndex: index
  }));

  // ÐŸÐµÑ€ÐµÐ¼ÐµÑˆÐ¸Ð²Ð°ÐµÐ¼ ÑÑ‚Ð¾Ñ‚ array
  const shuffledWithIndices = shuffleArray(optionsWithIndices);

  // Ð’Ñ‹Ñ‚Ð°ÑÐºÐ¸Ð²Ð°ÐµÐ¼ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ñ‹ Ð² Ð½Ð¾Ð²Ð¾Ð¼ Ð¿Ð¾Ñ€ÑÐ´ÐºÐµ
  newQuestion.options = shuffledWithIndices.map(item => item.option);

  // Ð“Ð›ÐÐ’ÐÐžÐ•: Ð½Ð°Ñ…Ð¾Ð´Ð¸Ð¼ Ð½Ð¾Ð²Ñ‹Ð¹ Ð¸Ð½Ð´ÐµÐºÑ Ñ‚Ð¾Ð³Ð¾ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ð°, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð±Ñ‹Ð» Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¼
  // ÐÑƒÐ¶Ð½Ð¾ Ð½Ð°Ð¹Ñ‚Ð¸ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ Ñ originalIndex === question.correctAnswer
  newQuestion.correctAnswer = shuffledWithIndices.findIndex(
    item => item.originalIndex === question.correctAnswer
  );

  return newQuestion;
};

// ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÑ‚ Ð¿ÐµÑ€ÐµÐ¼ÐµÑˆÐ°Ð½Ð½Ñ‹Ð¹ Ð½Ð°Ð±Ð¾Ñ€ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ¾Ð² Ð´Ð»Ñ Ð½Ð¾Ð²Ð¾Ð³Ð¾ ÐºÐ²Ð¸Ð·Ð°
// ÐŸÐµÑ€ÐµÐ¼ÐµÑˆÐ¸Ð²Ð°ÐµÑ‚:
// 1. ÐŸÐ¾Ñ€ÑÐ´Ð¾Ðº Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ¾Ð²
// 2. ÐŸÐ¾Ñ€ÑÐ´Ð¾Ðº Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ð¾Ð² Ð¾Ñ‚Ð²ÐµÑ‚Ð¾Ð² Ð² ÐºÐ°Ð¶Ð´Ð¾Ð¼ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐµ
export const getShuffledQuizData = () => {
  // Ð¨Ð°Ð³ 1: ÐŸÐµÑ€ÐµÐ¼ÐµÑˆÐ¸Ð²Ð°ÐµÐ¼ ÑÐ°Ð¼Ð¸ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹
  const shuffledQuestions = shuffleArray(quizData);

  // Ð¨Ð°Ð³ 2: Ð”Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ° Ð¿ÐµÑ€ÐµÐ¼ÐµÑˆÐ¸Ð²Ð°ÐµÐ¼ ÐµÐ³Ð¾ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ñ‹ Ð¾Ñ‚Ð²ÐµÑ‚Ð¾Ð²
  const fullyShuffledQuestions = shuffledQuestions.map(question =>
    shuffleQuestionOptions(question)
  );

  return fullyShuffledQuestions;
};
